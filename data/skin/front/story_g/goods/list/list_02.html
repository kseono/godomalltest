{*** 리스트형 | goods/list/list_02.html ***}

<div class="item-display type-tab-list">
    <div class="list">
    <!--{ ? goodsList }-->
    <ul class="gd-default">
        <!--{ @ goodsList }-->
        <!--{ @ .value_}-->
        <li>
            <div class="thumbnail" <!--{ ? ..goodsData }-->{=..goodsData}<!--{ / }-->>
                <a href="{=gd_goods_url(..goodsUrl, ..goodsNo)}"> <!--{ ? in_array('img',themeInfo.displayField) && gd_isset(..goodsImage) }-->{..goodsImage}<!--{ / }-->
                    <!--{ ? themeInfo.soldOutNIconFl == 'y'  && ..soldOut =='y'  && soldoutDisplay.soldout_overlay != '0' }--><span class="soldout-img" title="{=__('품절상품입니다.')}" style="background-image:url('{soldoutDisplay.soldout_overlay_img}');">{=__('품절')}</span><!--{ / }-->
                </a>
            </div>
            <div class="txt">
                <!--{ ? ..timeSaleFl }-->
                <span class="time-sale"><img src="../../img/icon/time-sale.png" alt="{=__('타임세일')}"></span>
                <!--{ / }-->
                <!--{ ? themeInfo.iconFl == 'y' }-->
                                        <span class="hot">
                                          {..goodsIcon}
                                        </span><br/>
                <!--{ / }-->
                <!--{ ? themeInfo.soldOutIconFl == 'y'  && ..soldOut =='y' && soldoutDisplay.soldout_icon != 'disable'  }-->
                <img src="{soldoutDisplay.soldout_icon_img}"><br/>
                <!--{ / }-->
                <!--{ ? in_array('goodsColor',themeInfo.displayField) }-->
                {..goodsColor}
                <!--{ / }-->
                <!--{ ?  in_array('brandCd',themeInfo.displayField) && gd_isset(..brandNm)  || in_array('makerNm',themeInfo.displayField) && gd_isset(..makerNm) }--> <span class="brand"><!--{ ? in_array('brandCd',themeInfo.displayField) && gd_isset(..brandNm) }--><strong>[{..brandNm}]</strong><!--{ / }--> <!--{ ? in_array('makerNm',themeInfo.displayField) && gd_isset(..makerNm) }-->{..makerNm}<!--{ / }--></span><br><!--{ / }-->
                <a href="{=gd_goods_url(..goodsUrl, ..goodsNo)}">
                    <!--{ ? in_array('goodsNm',themeInfo.displayField) && gd_isset(..goodsNm) }--> <strong>{..goodsNm}</strong><!--{ / }-->
                    <!--{ ? in_array('shortDescription',themeInfo.displayField) && gd_isset(..shortDescription) }--> <br><em>{..shortDescription}</em><!--{ / }-->
                </a>
            </div>
            <div class="price">
                <!--{ ? in_array('fixedPrice',themeInfo.displayField) && gd_isset(..fixedPrice) && ..fixedPrice > 0  && ..goodsPriceDisplayFl =='y'}-->
                <span style="<!--{ ? in_array('fixedPrice', themeInfo.priceStrike)}-->color:#888; text-decoration:line-through;<!--{ / }-->">{=gd_global_currency_symbol()}{=gd_global_money_format(..fixedPrice)}{=gd_global_currency_string()} {=gd_global_add_currency_display(..fixedPrice)}</span><br>
                <!--{ / }-->
                <!--{ ? in_array('goodsPrice',themeInfo.displayField) && gd_isset(..goodsPrice) }-->
                <!--{ ? themeInfo.soldOutIconFl == 'y'  && ..soldOut =='y' && soldoutDisplay.soldout_price == 'text'}-->
                <span class="cost"><strong>{=soldoutDisplay.soldout_price_text}</strong></span><br>
                <!--{ : themeInfo.soldOutIconFl == 'y'  && ..soldOut =='y' && soldoutDisplay.soldout_price == 'custom'}-->
                <span class="cost"><img src="{soldoutDisplay.soldout_price_img}"></span><br/>
                <!--{ : }-->
                <span class="cost">
                    <!--{ ? ..goodsPriceString !='' }-->
                    <strong>{..goodsPriceString}</strong>
                    <!--{ : }-->
                    <!--{ ? ..timeSaleFl && ..timeSaleGoodsPriceViewFl =='y' && ..goodsPriceDisplayFl =='y'}-->
                        <strong>{=gd_global_currency_symbol()}{=gd_global_money_format(..oriGoodsPrice)}</strong>{=gd_global_currency_string()} {=gd_global_add_currency_display(..oriGoodsPrice)}<br/>
                    <!--{ / }-->
                        <span <!--{ ? ..timeSaleFl}--><!--{ : }-->style="<!--{ ? in_array('goodsPrice', themeInfo.priceStrike) && ((in_array('coupon', themeInfo.displayField) && ..couponPrice != '' && ..goodsPriceDisplayFl =='y') || (in_array('goodsDiscount', themeInfo.displayField) && ..dcPrice > 0)) }-->text-decoration:line-through<!--{ / }-->"<!--{ / }-->><strong <!--{ ? ..timeSaleFl}-->class='{..cssTimeSaleIcon}'<!--{ / }-->>{=gd_global_currency_symbol()}{=gd_global_money_format(..goodsPrice)}</strong>{=gd_global_currency_string()}</span>
                        {=gd_global_add_currency_display(..goodsPrice)}
                    <!--{ / }-->
                    <!--{ ? ..timeSaleFl && gd_isset(..timeSaleLeftTimeTxt) }--><strong class='time_sale_text'>{..timeSaleLeftTimeTxt}</strong><!--{ / }-->
                </span>
                <br>
                <!--{ / }-->
                <!--{ / }-->
                <!--{ ? in_array('goodsDiscount', themeInfo.displayField) && ..dcPrice > 0 && ..goodsPriceDisplayFl =='y' }-->
                <span class="cost">
                            <strong>{=gd_global_currency_symbol()}{=gd_global_money_format(..goodsPrice - ..dcPrice)}</strong>{=gd_global_currency_string()} {=gd_global_add_currency_display(..goodsPrice - ..dcPrice)}
                    <!--{ ? in_array('dcRate', themeInfo.displayAddField) && gd_isset(..goodsDcRate) }--> <span class="item_number_box">({=..goodsDcRate}%)</span><!--{ / }--><br>
                        </span>
                <!--{ / }-->
                <!--{ ? in_array('coupon',themeInfo.displayField) && ..couponPrice != ''  && ..goodsPriceDisplayFl =='y' }-->
                <span class="sale">
                    <strong>{=gd_global_currency_symbol()}{=gd_global_money_format(..couponPrice)}</strong>{=gd_global_currency_string()} {=gd_global_add_currency_display(..couponPrice)}
                    <!--{ ? in_array('dcRate', themeInfo.displayAddField) && gd_isset(..couponDcRate) }--> <span class="item_number_box">({=..couponDcRate}%)</span><!--{ / }-->
                    <img src="../../img/icon/coupon.png" alt="{=__('쿠폰')}">
                </span><br>
                <!--{ / }-->
                <!--{ ? in_array('goodsDcPrice',themeInfo.displayField) && gd_isset(..goodsDcPrice) && ..goodsPriceDisplayFl =='y' }-->
                <span class="mileage"><img src="../../img/icon/sale.png" alt="{=__('상품할인금액')}"> {=gd_global_money_format(..goodsDcPrice)} {=gd_global_currency_string()}</span><br/><!--{ / }-->
                <!--{ ? in_array('mileage',themeInfo.displayField) && gd_isset(..mileageBasic) && ..goodsPriceDisplayFl =='y' }-->
                <span class="mileage"><img src="../../img/icon/mileage.png" alt="{=__('마일리지')}"> {..mileageBasic} {=mileageData['unit']}</span><!--{ / }-->
            </div>
            <!--{ ? in_array('goodsModelNo',themeInfo.displayField) && gd_isset(..goodsModelNo)  }-->
            <div class="txt">{=__('모델번호')} : {..goodsModelNo}</div>
            <!--{ / }-->
            <!--{ ? in_array('goodsNo',themeInfo.displayField) && gd_isset(..goodsNo) }-->
            <div class="txt">{=__('상품코드')} : {..goodsNo}</div>
            <!--{ / }-->
            <div class="btn">
                <!--{ ? ..soldOut != 'y' }-->
                <button href="#optionViewLayer" type="button" class="cart btn-open-layer btn-add-cart{mainData.sno}" data-mode="cartIn" data-goods-no="{..goodsNo}">{=__('장바구니')}</button>
                <button type="button" class="wish btn-add-wish{mainData.sno}{mainData.groupSno}" data-goods-no="{..goodsNo}" data-optionfl="{..optionFl}" data-min-order-cnt="{..minOrderCnt}">{=__('찜하기')}</button>
                <!--{ / }-->
            </div>
        </li>
        <!--{ / }-->
        <!--{ / }-->
    </ul>
    <!--{ : }-->
    <div class="no-data">{=__('상품이 존재하지 않습니다.')}</div>
    <!--{ / }-->
</div>
</div>
<div id="optionViewLayer" class="layer-wrap dn"></div>
<!-- 장바구니 담기 레이어 -->
<div id="addCartLayer" class="layer-wrap dn">
    <div class="box add-cart-layer">
        <div class="view">
            <h2>{=__('장바구니 담기')}</h2>
            <div class="scroll-box">
                <p class="success"><strong>{=__('상품이 장바구니에 담겼습니다.')}</strong><br />{=__('바로 확인하시겠습니까?')}</p>
            </div>
            <div class="btn">
                <button class="skinbtn point1 layer-cartaddcancel btn-close"><em>{=__('취소')}</em></button>
                <button class="skinbtn point2 layer-cart-btn layer-cartaddconfirm"><em>{=__('확인')}</em></button>
            </div>
            <button title="{=__('닫기')}" class="close" type="button">{=__('닫기')}</button>
        </div>
    </div>
</div>
<!--//장바구니 담기 레이어 -->
<!-- 찜리스트 레이어 -->
<div id="addWishLayer" class="layer-wrap dn">
    <div class="box add-wish-layer">
        <div class="view">
            <h2>{=__('찜 리스트 담기')}</h2>
            <div class="scroll-box">
                <p class="success"><strong>{=__('상품이 찜 리스트에 담겼습니다.')}</strong><br />{=__('바로 확인하시겠습니까?')}</p>
            </div>
            <div class="btn">
                <button class="skinbtn point1 layer-wishaddcancel btn-close"><em>{=__('취소')}</em></button>
                <button class="skinbtn point2 layer-wish-btn layer-wishaddconfirm"><em>{=__('확인')}</em></button>
            </div>
            <button title="{=__('닫기')}" class="close" type="button">{=__('닫기')}</button>
        </div>
    </div>
</div>
<!--//찜리스트 레이어 -->
<form id="frmView" method=post>
<input type="hidden" name="mode" value="wishIn">
<input type="hidden" name="cartMode" value="">
<input type="hidden" name="optionFl" value="">
</form>
<script type="text/javascript">
<!--

    // DOM 로드
    $(function () {

        $('.btn').on('click', '.btn-add-wish{mainData.sno}{mainData.groupSno}', function(){
            <!--{ ? gd_is_login() === false }-->
            alert("{=__('로그인하셔야 본 서비스를 이용하실 수 있습니다.')}");
            document.location.href = "../member/login.php";

            return false;
            <!--{ : }-->
            var minOrderCnt = 1;
            if ($(this).data('min-order-cnt')) {
                minOrderCnt = parseInt($(this).data('min-order-cnt'));
                if (minOrderCnt > 1) {
                    alert(__('최소 %s개 이상 구매가능합니다', minOrderCnt));
                }
            }
            $('#frmView input[name=\'cartMode\']').val($(this).data('goods-no'));
            $('#frmView input[name=\'optionFl\']').val($(this).data('optionfl'));

            var params = $('#frmView').serialize();

            $.ajax({
                method: "POST",
                cache: false,
                url: '../mypage/wish_list_ps.php',
                data: params,
                success: function (data) {
                    // error 메시지 예외 처리용
                    if (!_.isUndefined(data.error) && data.error == 1) {
                        alert(data.message);
                        return false;
                    }

                    <!--{ ? cartInfo.wishPageMoveDirectFl == 'y' || (cartInfo.wishPageMoveDirectFl == 'n' && cartInfo.moveWishPageDeviceFl == 'mobile') }-->
                    location.href = "../mypage/wish_list.php";
                    return false;
                    <!--{ / }-->

                    $("#addWishLayer").removeClass('dn');
                    $('#layerDim').removeClass('dn');
                    $("#addWishLayer").find('> div').center();
                },
                error: function (data) {
                    alert(data.message);
                }
            });

            return false;
            <!--{ / }-->
        });

        $(document).on('click', '.btn-add-cart{mainData.sno}', function(e){
            if($(this).data('mode') == 'cartIn') {
                var params = {
                    page: 'goods',
                    type: 'goods',
                    goodsNo: $(this).data('goods-no')
                };

                $.ajax({
                    method: "POST",
                    cache: false,
                    url: "../goods/layer_option.php",
                    data: params,
                    success: function (data) {
                        $('#optionViewLayer').empty().append(data);
                        $('#optionViewLayer').find('>div').center();
                    },
                    error: function (data) {
                        alert(data.message);

                    }
                });
            }

        });

        $('.layer-cartaddconfirm').click(function(){
            location.href = '../order/cart.php';
        });

        $('.layer-wishaddconfirm').click(function(){
            location.href = '../mypage/wish_list.php';
        });
    });

    function goods_option_view_result(params) {
        params += "&mode=cartIn";

        $.ajax({
            method: "POST",
            cache: false,
            url: "../order/cart_ps.php",
            data: params,
            success: function (data) {
                <!--{ ? cartInfo.moveCartPageFl == 'y' || (cartInfo.moveCartPageFl == 'n' && cartInfo.moveCartPageDeviceFl == 'mobile') }-->
                closeLayer();
                location.href="../order/cart.php";
                <!--{ : }-->

                $("#optionViewLayer").addClass('dn');
                $("#addCartLayer").removeClass('dn');
                $('#layerDim').removeClass('dn');
                $("#addCartLayer").find('> div').center();

                <!--{ / }-->
            },
            error: function (data) {
                alert(data.message);

            }
        });
    }
//-->
</script>
