{*** [위젯] 메인 상품 출력 | goods/_goods_display_main.php ***}
<!--{ ? mainData.displayFl == 'y'}-->

<!--{ ? (mainData.kind == 'event' && mainData.displayCategory == 'g' && firstGroup == 'y')}-->
<div class="item-display-wrap">
    <!--{ ? mainData.eventThemeName }-->
        <h2>{=__(mainData.eventThemeName)}</h2>
    <!--{ / }-->
    <!--{ ? mainData.eventThemePcContents}-->
    <div class="contents">
        {=mainData.eventThemePcContents}
    </div>
    <!--{/}-->

    <!--{ ? mainData.otherEventData }-->
    <div style="text-align: right; width: 100%; margin: 10px 0 10px 0;">
        <select name="otherEventData" onchange="javascript:location.href='/goods/event_sale.php?sno=' + this.value;">
            <!--{ @ mainData.otherEventData }-->
            <option value="{.value_['sno']}">{.value_['themeNm']}</option>
            <!--{/}-->
        </select>
    </div>
    <!--{/}-->
</div>
<!--{/}-->

<div class="item-display-wrap js-main-wrap-{mainData.sno}-{mainData.groupSno}">
    <!--{ ? mainData.themeNm }--> <h2>{=__(mainData.themeNm)}
    <!--{ ? mainData.moreTopFl == 'y'}-->
        <!--{ ? mainData.displayCategory == 'g'}-->
            <a href="../goods/goods_main.php?sno={mainData.sno}&groupSno={mainData.groupSno}" class="btn-main-top-more normal-btn small1 m1"><em>{=__('더보기')}</em></a>
        <!--{ : }-->
            <a href="../goods/goods_main.php?sno={mainData.sno}" class="btn-main-top-more normal-btn small1 m1"><em>{=__('더보기')}</em></a>
        <!--{ / }-->
    <!--{ / }-->
</h2><!--{ / }-->


<!--{ ? mainData.pcContents}-->
<div class="contents">
    {=mainData.pcContents}
</div>
<!--{/}-->

<!--{ ? mainData.kind == 'event' && mainData.displayCategory != 'g'}-->
    <!--{ ? mainData.otherEventData }-->
    <div style="text-align: right; width: 100%; margin: 10px 0 10px 0;">
        <select name="otherEventData" onchange="javascript:location.href='/goods/event_sale.php?sno=' + this.value;">
            <!--{ @ mainData.otherEventData }-->
            <option value="{.value_['sno']}">{.value_['themeNm']}</option>
            <!--{/}-->
        </select>
    </div>
    <!--{/}-->
<!--{/}-->

<div class="goods-content{mainData.sno}{mainData.groupSno}">
    { #goodsTemplate }
</div>
<!--{ ? totalPage > 1 && mainData.moreBottomFl == 'y' && themeInfo.displayType !='04' && themeInfo.displayType !='05' && themeInfo.displayType !='06' && themeInfo.displayType !='07' }--><a class="btn-main-bottom-more"  data-page="2"  ><em>{=__('더보기')}</em></a><!--{ / }-->
</div>


<script type="text/javascript">
    <!--
    var keyValue{mainData.sno} = '{gGlobal.locale}' + '{mainData.sno}';
    var key{mainData.sno} = {
        html: 'html' + keyValue{mainData.sno},
        page: 'page' + keyValue{mainData.sno}
    };
    var gdStorage{mainData.sno} = loadSession(key{mainData.sno}.html);
    var page{mainData.sno} = loadSession(key{mainData.sno}.page);

    $(document).ready(function(){
        if (gdStorage{mainData.sno}) {
            $('.goods-content{mainData.sno}').html(gdStorage{mainData.sno});
            if (page{mainData.sno}) {
                $('.js-main-wrap-{mainData.sno} .btn-main-bottom-more').attr('data-page',page{mainData.sno});
            }
        }

        $('.js-main-wrap-{mainData.sno}-{mainData.groupSno} .btn-main-bottom-more').on('click', function(e){
            get_list{mainData.sno}{mainData.groupSno}($(this).data('page'));
        });

    });

    function get_list{mainData.sno}{mainData.groupSno}(page){
        $.get('../goods/goods_main.php', {'mode' : 'get_main', 'more' : page, 'sno' : '{mainData.sno}', 'groupSno' : '{mainData.groupSno}'}, function (data) {
            $(".goods-content{mainData.sno}{mainData.groupSno}").html(data);
            saveSession(key{mainData.sno}.html, data);
            if(parseInt(page)+1 > {totalPage}) {
                $('.js-main-wrap-{mainData.sno}-{mainData.groupSno} .btn-main-bottom-more').hide();
            } else {
                $('.js-main-wrap-{mainData.sno}-{mainData.groupSno} .btn-main-bottom-more').data('page',parseInt(page)+1);
                saveSession(key{mainData.sno}.page, parseInt(page)+1);
            }
        });
    }

    //-->
</script>
<!--{ / }-->
