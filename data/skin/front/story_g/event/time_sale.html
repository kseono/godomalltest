{*** 타임세일 리스트 | goods/goods_list.php ***}
{ # header }

<script type="text/javascript">
    $(document).ready(function () {

        $('form[name=frmList] select[name=pageNum]').change(function() {
            $('form[name=frmList]').get(0).submit();
        });

        $('form[name=frmList] input[name=sort]').click(function() {
            $('form[name=frmList]').get(0).submit();
        });

        $(':radio[name="sort"][value="{sort}"]').prop("checked","checked")
        $(':radio[name="sort"][value="{sort}"]').next().addClass('on');

        $("#displayTimeSale").hide();
        gd_dailyMissionTimer('{=timeSaleDuration}');

        $('.btn_goods_view_down_more').on('click', function(e){
            gd_get_list($(this).data('page'));
        });
    });


    /**
     * 시간간격 카운트
     * @returns {String}
     */
    function gd_dailyMissionTimer(duration) {

        var timer = duration;
        var days,hours, minutes, seconds;

        var interval = setInterval(function(){
            days	= parseInt(timer / 86400, 10);
            hours	= parseInt(((timer % 86400 ) / 3600), 10);
            minutes = parseInt(((timer % 3600 ) / 60), 10);
            seconds = parseInt(timer % 60, 10);

            if(days <= 0) {
                $('.time-day-view').hide();
            } else {
                $('#timeDay').html("");

                days 	= days < 10 ? "0" + days : days;
                for(i = 0; i < days.toString().length; i++) {
                    $('#timeDay').append("<strong>"+days.toString().substr(i,1)+"<strong>");
                }
            }

            hours 	= hours < 10 ? "0" + hours : hours;
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            $('#timeHour strong').eq(0).text(hours.toString().substr(0,1));
            $('#timeHour strong').eq(1).text(hours.toString().substr(1,1));

            $('#timeMin strong').eq(0).text(minutes.toString().substr(0,1));
            $('#timeMin strong').eq(1).text(minutes.toString().substr(1,1));

            $('#timeSec strong').eq(0).text(seconds.toString().substr(0,1));
            $('#timeSec strong').eq(1).text(seconds.toString().substr(1,1));

            $("#displayTimeSale").show();

            if (--timer < 0) {
                timer = 0;
                clearInterval(interval);
            }
        }, 1000);
    }

    function gd_get_list(page) {
        var totalPage = $('input[name="totalPage"]').val();

        $.get('../event/time_sale.php', {'mode' : 'get_more', 'more' : page, 'sno' : '{timeSaleInfo.sno}', 'sort' : '{sort}'}, function (data) {
            $(".goods_list_cont").html(data);
            if (parseInt(page) + 1 > totalPage) {
                $('.btn_goods_view_down_more').hide();
            } else {
                $('.btn_goods_view_down_more').data('page', parseInt(page) + 1);
            }
        });
    }

</script>

<div class="contents">
    <div class="view">
        <div class="time-sale">
            <div class="location">
                <h3 class="dn">{=__('현재 위치')}</h3>
                <span>{=__('홈')}</span>
                <div class="navi">
                    <div class="this">
                        <a href="#">{timeSaleInfo.timeSaleTitle}</a>
                        <div>
                            <!--{ @ timeSaleList }-->
                            <a href="./time_sale.php?sno={.sno}">{.timeSaleTitle}</a>
                            <!--{ / }-->
                        </div>
                    </div>
                </div>
            </div>

            <div class="tit-term">
                <h4>{timeSaleInfo.timeSaleTitle}</h4>
                <strong>{=__('기간')} : {timeSaleInfo.startDt} ~ {timeSaleInfo.endDt} </strong>
            </div>

            <div class="event">
                <div class="ctt">
                    {=timeSaleInfo.pcDescription}
                </div>
                <div class="count"  id="displayTimeSale">
                    <strong>{=__('남은시간')}</strong>
                    <div class="day time-day-view" id="timeDay">
                    </div>
                    <strong class="time-day-view">{=__('일')}</strong>
                    <div class="time" id="timeHour">
                        <strong>{=substr(limitDate.hour,0,1)}</strong>
                        <strong>{=substr(limitDate.hour,0,1)}</strong>
                        <span>:</span>
                    </div>
                    <div class="time" id="timeMin">
                        <strong>{=substr(limitDate.min,0,1)}</strong>
                        <strong>{=substr(limitDate.min,0,1)}</strong>
                        <span>:</span>
                    </div>
                    <div class="time" id="timeSec">
                        <strong>{=substr(limitDate.sec,0,1)}</strong>
                        <strong>{=substr(limitDate.sec,0,1)}</strong>
                    </div>
                </div>
            </div>



            <div class="goods-list">
                <!--{ ? themeInfo.cateHtml3 }--><div>{=stripslashes(themeInfo.cateHtml3)}</div><!--{ / }-->
                <span class="tc">{=__('상품')} <strong>{=number_format(goodsListCnt)}</strong> {=__('개')}</span>
                <form name="frmList" action="">
                    <input type="hidden" name="sno" value="{timeSaleSno}"/>
                    <fieldset>
                        <legend>{=__('상품 정렬 폼')}</legend>
                        <div class="align">
                            <ul>
                                <li>
                                    <input type="radio" id="sort1" class="radio" name="sort" value="">
                                    <label for="sort1">{=__('추천순')}</label>
                                </li>
                                <li>
                                    <input type="radio" id="sort2" class="radio" name="sort" value="sellcnt">
                                    <label for="sort2">{=__('판매인기순')}</label>
                                </li>
                                <li>
                                    <input type="radio" id="sort3" class="radio" name="sort" value="price_asc">
                                    <label for="sort3">{=__('낮은가격순')}</label>
                                </li>
                                <li>
                                    <input type="radio" id="sort4" class="radio" name="sort" value="price_dsc">
                                    <label for="sort4">{=__('높은가격순')}</label>
                                </li>
                                <li>
                                    <input type="radio" id="sort5" class="radio" name="sort" value="review">
                                    <label for="sort5">{=__('상품평순')}</label>
                                </li>
                                <li>
                                    <input type="radio" id="sort6" class="radio" name="sort" value="date">
                                    <label for="sort6">{=__('등록일순')}</label>
                                </li>
                            </ul>
                        </div>
                    </fieldset>
                </form>

                <div class="goods_list_cont">
                    <!-- 상품 리스트 -->
                    { # goodsTemplate }
                    <!-- //상품 리스트 -->
                </div>
            </div>
            <!--{ ? totalPage > 1 && timeSaleInfo.moreBottomFl == 'y' && themeInfo.displayType != '04' && themeInfo.displayType != '05' && themeInfo.displayType != '06' && themeInfo.displayType != '07' }-->
            <div class="btn_goods_down_more">
                <input type="hidden" name="totalPage" value="{totalPage}" >
                <button class="btn_goods_view_down_more" data-page="2">{=__('더보기')}</button>
            </div>
            <!--{ / }-->

    </div>
    </div>
    <hr>
</div>


{ # footer }
