{*** 휴면회원 해제 인증 | member/wake_certification.php ***}
{ # header }
<!--{? authType == 'authSms'}-->
<h2 class="my_tit">{=__('SMS 인증번호')}</h2>
<!--{: authType == 'authEmail'}-->
<h2 class="my_tit">{=__('이메일 인증번호')}</h2>
<!--{/}-->
<div class="sleep-member">
    <!--{? authType == 'authSms'}-->
    <p class="guide">{=__('인증번호가 고객님의 가입된 휴대폰 번호 %s로 전송되었습니다.', '<br><span class="c-red">(' + maskCellphone + ')</span>')}</p>
    <!--{: authType == 'authEmail'}-->
    <p class="guide">{=__('인증번호가 고객님의 이메일 %s로 전송되었습니다.', '<br><span  class="c-red">(' + maskEmail + ')</span>')}</p>
    <!--{/}-->
</div>

<div class="sleep-member-num">
<div class="inp_tx">
    <label for="inputCertify" class="blind">{=__('인증번호 입력')}</label>
    <input type="text" id="inputCertify" placeholder="{=__('인증번호 입력')}">
</div>
</div>
<p class="caution dn">{=__('입력하신 인증번호가 일치하지 않습니다.')} <br>{=__('인증번호를 확인 후 정확히 입력해 주세요.')}</p>
<button type="button" class="btn" id="btnNextStep">{=__('해지하기')}</button>

<script type="text/javascript">
    (function ($, window, document, undefined) {
        var url = '../member/wake_ps.php';

        function cancel() {
            window.location.href = '../member/wake.php';
        }

        function again() {
            var $ajax = $.ajax(url, {
                method: "POST",
                data: {
                    mode: "{memberInfo['authType']}"
                }
            });
            $ajax.done(function (data, textStatus, jqXHR) {
                console.log('gd_member ajax', data, textStatus, jqXHR);
                var code = data.code;
                var message = data.message;
                if (_.isUndefined(code) && _.isUndefined(message)) {
                    alert("{=__('인증번호가 재발송 되었습니다.')}");
                } else {
                    alert(message);
                }
            });
        }

        function auth() {
            var $ajax = $.ajax(url, {
                method: "POST",
                data: {
                    mode: "certificationAuthNumber",
                    number: $('#inputCertify').val()
                }
            });
            $ajax.done(function (data, textStatus, jqXHR) {
                console.log('gd_member ajax', data, textStatus, jqXHR);
                var code = data.code;
                var message = data.message;
                if (_.isUndefined(code) && _.isUndefined(message)) {
                    window.location.href = data;
                } else {
                    alert(message);
                }
            });
        }

        $(document).ready(function () {
            $('#btnPrevStep').click(cancel);
            $('a[name="btnAgain"]').click(function (e) {
                e.preventDefault();
                again();
            });
            $('#btnNextStep').click(auth);
        });
    })($, window, document);
</script>
{ # footer }
